<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


  <!-- Meta -->
  <meta name="description" content="HRA Monitoring Portal">
  <meta name="author" content="Cyberstate">

  <title>HRA - Beneficiary Detail</title>

  <!-- vendor css -->
  <link href="theme/lib/font-awesome/css/font-awesome.css" rel="stylesheet">
  <link href="theme/lib/Ionicons/css/ionicons.css" rel="stylesheet">
  <link href="theme/lib/perfect-scrollbar/css/perfect-scrollbar.css" rel="stylesheet">
  <link href="theme/lib/jquery-switchbutton/jquery.switchButton.css" rel="stylesheet">
  <link href="theme/lib/highlightjs/github.css" rel="stylesheet">
  <link href="theme/lib/datatables/jquery.dataTables.css" rel="stylesheet">
  <link href="theme/lib/select2/css/select2.min.css" rel="stylesheet">

  <!-- Bracket CSS -->
  <link rel="stylesheet" href="theme/css/bracket.css">
</head>

<body>
  <% include ../partials/header %>

  <!-- ########## START: MAIN PANEL ########## -->
  <div class="br-mainpanel">
    <div class="br-pageheader">
      <nav class="breadcrumb pd-0 mg-0 tx-12">
        <a class="breadcrumb-item" href="/hc-dashboard">Dashboard</a>
        <a class="breadcrumb-item" href="/beneficiary">Beneficiaries</a>
        <span class="breadcrumb-item active">Detail</span>
      </nav>
    </div><!-- br-pageheader -->
    <div class="br-pagetitle">
      <i class="icon icon ion-ios-person"></i>
      <div>
        <h4>Beneficiary's Address Update Form</h4>
        <h5 class="mg-b-0">CNIC: <%= Beneficiary.CNIC %></h5>
      </div>
    </div><!-- d-flex -->

    <div class="br-pagebody">
      <div class="br-section-wrapper">

        <div class="row">
          <div class="col-sm-12">
            <div class="ht-70 bg-gray-100 pd-x-20 d-flex align-items-center justify-content-center shadow-base">
              <ul class="nav nav-outline active-info align-items-center flex-row" role="tablist">
                <li class="nav-item"><a class="nav-link active show" data-toggle="tab" href="#profile" role="tab"
                    aria-selected="true">Basic Profile</a></li>

              </ul>
            </div>
            <div class="tab-content br-profile-body">
              <div class="tab-pane fade active show" id="profile">
                <form id="formBeneficiaryAddress">
                  <input class="form-control" type="text" name="CNIC" value="<%= Beneficiary.CNIC %>"
                    style="visibility: hidden;">
                  <div class="row mg-t-0">
                    <div class="col-sm-8">
                      <div class="form-layout form-layout-2">
                        <div class="row no-gutters">
                          <div class="col-md-3">
                            <div class="form-group mg-md-l--1 bd-t-0-force">

                              <label class="form-control-label mg-b-0-force">District: <span
                                  class="tx-danger">*</span></label>
                              <select id="select2-District" name="DistrictID" class="form-control"
                                data-placeholder="Choose District" style="width:100%">
                                <option label="Choose district"></option>
                                <% Districts.forEach(function(district) { %>
                                <% if (Beneficiary.DistrictID == district.DistrictID) { %>
                                <option value="<%= district.DistrictID %>" selected><%= district.DistrictName %>
                                </option>
                                <% } else { %>
                                <option value="<%= district.DistrictID %>"><%= district.DistrictName %></option>
                                <% } %>
                                <% }); %>
                              </select>
                            </div>
                          </div><!-- col-4 -->
                          <div class="col-md-3">
                            <div class="form-group mg-md-l--1 bd-t-0-force">
                              <label class="form-control-label mg-b-0-force">Tehsil: <span
                                  class="tx-danger">*</span></label>
                              <select id="select2-Tehsil" name="TehsilID" class="form-control"
                                data-placeholder="Choose Tehsil" style="width:100%">
                                <option label="Choose tehsil"></option>
                                <% Tehsils.forEach(function(tehsil) { %>
                                <% if (Beneficiary.TehsilID == tehsil.TehsilID) { %>
                                <option value="<%= tehsil.TehsilID %>" selected><%= tehsil.TehsilName %></option>
                                <% } else { %>
                                <option value="<%= tehsil.TehsilID %>"><%= tehsil.TehsilName %></option>
                                <% } %>
                                <% }); %>
                              </select>
                            </div>
                          </div><!-- col-4 -->
                          <div class="col-md-3">
                            <div class="form-group mg-md-l--1 bd-t-0-force">
                              <label class="form-control-label mg-b-0-force">UC: <span
                                  class="tx-danger">*</span></label>
                              <select id="select2-UC" name="UCID" class="form-control" data-placeholder="Choose UC"
                                style="width:100%">
                                <option label="Choose UC"></option>
                                <% UCs.forEach(function(uc) { %>
                                <% if (Beneficiary.UCID == uc.UCID) { %>
                                <option value="<%= uc.UCID %>" selected><%= uc.UCName %></option>
                                <% } else { %>
                                <option value="<%= uc.UCID %> "><%= uc.UCName %></option>
                                <% } %>
                                <% }) %>
                              </select>
                            </div>
                          </div><!-- col-4 -->
                          <div class="col-md-3">
                            <div class="form-group mg-md-l--1 bd-t-0-force">
                              <label class="form-control-label mg-b-0-force">Village: <span
                                  class="tx-danger">*</span></label>
                              <select id="select2-Village" name="VillageID" class="form-control"
                                data-placeholder="Choose Village" style="width:100%">
                                <option label="Choose Village"></option>
                                <% Villages.forEach(function(village) { %>
                                <% if (Beneficiary.VillageID == village.VillageID) { %>
                                <option value="<%= village.VillageID %>" selected><%= village.VillageName %></option>
                                <% } else { %>
                                <option value="<%= village.VillageID %>"><%= village.VillageName %></option>
                                <% } %>
                                <% }); %>
                              </select>
                            </div>
                          </div><!-- col-4 -->

                          <div class="col-md-6">
                            <div class="form-group">
                              <label class="form-control-label">Firstname: <span class="tx-danger">*</span></label>
                              <input class="form-control" type="text" name="firstname"
                                value="<%= Beneficiary.FirstName %>" placeholder="Enter firstname">
                            </div>
                          </div><!-- col-4 -->
                          <div class="col-md-6 mg-t--1 mg-md-t-0">
                            <div class="form-group mg-md-l--1">
                              <label class="form-control-label">Lastname: <span class="tx-danger">*</span></label>
                              <input class="form-control" type="text" name="lastname"
                                value="<%= Beneficiary.LastName %>" placeholder="Enter lastname">
                            </div>
                          </div><!-- col-4 -->
                          <div class="col-md-6 mg-t--1 mg-md-t-0">
                            <div class="form-group mg-md-l--1">
                              <label class="form-control-label">Phone (Primary) <span class="tx-danger">*</span></label>
                              <input class="form-control" type="text" name="PhonePrimary"
                                value="<%= Beneficiary.PhonePrimary %>" placeholder="Enter primary phone no">
                            </div>
                          </div><!-- col-4 -->
                          <div class="col-md-6 mg-t--1 mg-md-t-0">
                            <div class="form-group mg-md-l--1">
                              <label class="form-control-label">Phone (Secondary) <span
                                  class="tx-danger">*</span></label>
                              <input class="form-control" type="text" name="PhoneSecondary"
                                value="<%= Beneficiary.PhoneSecondary %>" placeholder="Enter secondary phone no">
                            </div>
                          </div><!-- col-4 -->




                        </div><!-- row -->
                        <div class="form-layout-footer bd pd-20 bd-t-0">
                          <button type="button" class="btn btn-info " id="saveButton">Save</button>
                          <button class="btn btn-warning"><a href="/beneficiary">Cancel</a></button>
                        </div><!-- form-group -->
                      </div><!-- form-layout -->
                    </div>
                    <div class="col-md-4">
                      <div class="row">
                        <div class="col-md-12">
                          <% if (FaceImage == "") { %>
                          <div class="card" style="height:400px;align-items:center;">
                            <img src="theme/img/img11.jpg" class="img-fluid" alt="" style="width:auto;height:inherit;">
                          </div><!-- card -->

                          <% } else { %>
                          <div class="card" style="height:400px;align-items:center;">
                            <img src="data:image/jpeg;base64, <%= FaceImage %>" class="card-img-bottom img-fluid" alt=""
                              style="height:inherit;width:auto;border:5px solid black">
                          </div><!-- card -->

                          <% } %>
                        </div>
                      </div>

                    </div>

                  </div>
                </form>
              </div><!-- tab-pane -->

            </div>
          </div>


        </div>

      </div><!-- br-section-wrapper -->
    </div><!-- br-pagebody -->
    <% include ../partials/footer %>
  </div><!-- br-mainpanel -->
  <!-- ########## END: MAIN PANEL ########## -->
  <div id="modalBeneficiaryDetail" class="modal fade" style="display: none;" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content tx-size-sm">
        <div class="modal-header pd-x-20">
          <h6 class="tx-14 mg-b-0 tx-uppercase tx-inverse tx-bold">Message</h6>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body pd-20">

        </div><!-- modal-body -->
        <div class="modal-footer">

          <button type="button" class="btn btn-secondary tx-size-xs" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div><!-- modal-dialog -->
  </div>


  <script src="theme/lib/jquery/jquery.js"></script>
  <script src="theme/js/popper.js"></script>
  <script src="theme/lib/bootstrap/js/bootstrap.js"></script>
  <script src="theme/lib/perfect-scrollbar/js/perfect-scrollbar.jquery.js"></script>
  <script src="theme/lib/moment/moment.js"></script>
  <script src="theme/lib/jquery-ui/jquery-ui.js"></script>
  <script src="theme/lib/jquery-switchbutton/jquery.switchButton.js"></script>
  <script src="theme/lib/peity/jquery.peity.js"></script>
  <script src="theme/lib/highlightjs/highlight.pack.js"></script>
  <script src="theme/lib/datatables/jquery.dataTables.js"></script>
  <script src="theme/lib/datatables-responsive/dataTables.responsive.js"></script>
  <script src="https://cdn.datatables.net/fixedheader/3.1.5/js/dataTables.fixedHeader.min.js"></script>
  <script src="theme/lib/select2/js/select2.min.js"></script>

  <script src="theme/js/bracket.js"></script>
  <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAtFS563VrFYCkOBmG8J2-noujJ9gP18EM"></script>

  <script>

    $(function () {
      $(document).ready(function () {
        document.getElementById("li-beneficiary").classList.add('active');
        document.getElementById("ben-list").classList.add('active');
        $('#select2-District, #select2-Tehsil, #select2-UC, #select2-Village, \
          #select2-BenStatus, #select2-Gender, #select2-IsNew, #select2-HouseType').select2({


        });

        function htmlDecode(input) {
          var e = document.createElement('div');
          e.innerHTML = input;
          return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
        }

        $('#saveButton').click(function () {
          $.ajax({
            url: '/beneficiary/updateAddress',
            type: 'POST',
            data: $("#formBeneficiaryAddress").serialize(),
            success: function (data) {   // A function to be called if request succeeds
              console.log('Beneficiary\'s address updated');
              var mymodal = $('#modalBeneficiaryDetail');
              mymodal.find('.modal-body').text('Beneficiary\'s address has been updated successfully!');
              mymodal.find('.modal-title').text('Beneficiary Address Update');
              $('#modalBeneficiaryDetail').modal('show');
            },
            error: function (data) {
              console.log('Couldn\'t update the beneficiary\'s record');
              var mymodal = $('#modalBeneficiaryDetail');
              mymodal.find('.modal-body').text('Beneficiary\'s address could not be updated!');
              mymodal.find('.modal-title').text('Beneficiary Address Update');
              $('#modalBeneficiaryDetail').modal('show');
            }
          });
        });

        $('#cancelButton').click(function () {

        });


      });


    });
  </script>
</body>

</html>